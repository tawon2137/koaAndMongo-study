# MongoDB 1장
## 1.NOSQL
### NOSQL 특징
**NOSQL 등장 배경**
- **기존 컴퓨팅 시스템 특징**
    1. 기업 업무를 자동화하고 효율화하는 목적
    2. 기업의 복잡한 데이터를 저장하고 그데이터 간의 관계를 정의하고 분석하는데 최적화
    3. 기업의 업무 시스템의 해당 기업의 생산과 판매를 원하기 위한 것
    4. 생성되는 데이터양은 한계를 가지고 있음
---
- 데이터의 패러다임이 한정된 규모의 복잡성이 높은 데이터에서 단순한  대량의 데이터로 넘어가기 시작했음
- 기존의 데이터 저장 시스템으로는 커버할 수 없는 여러가지 한계를 야기했고 결국에는 새로운 형태의 데이터 저장 기술을 요구하게 되었음
---
- 대표적인 인터넷 기업이면서 대용량 단순 데이터를 가장 많이 보유했기 떄문에. 단순한 대용량 데이터 처레애 대한 요구가 가장많은 구글과 아마존에 의해 **빅테이블(Bigtable)**과 **Dynamo**라는 논문이 발표되었으며, 두논문은 새로운 데이터를 저장하는 기술을 만들어내는 시발점이 되었고, 기존의 오라클 등으로 대변되는 RDBMS 중심의 데이터 저장 기술 시장에 새로운 데이터 저장 기술인 NOSQL이 등장하는 계기가 되었음.

```
NOSQL은 Not Only SQL의 약자로 기존 RDBMS 형태의 관계형 데이터베이스가 아닌 다른 형태의 데이터형식과 저장기술을 의미합니다. 
```
- NOSQL이라고 해서  RDBMS 제품군(MS-SQL, Oracle, Sybase, MySQL)과 같이 공통된 형태의 데이터 저장 방식(테이블)과 접근방식(SQL)을 갖는 제품군이 아니라 RDBMS와 다른 형태의 데이터 저장 구조를 총칭합니다.
- 관계형 데이터베이스인 RDBMS가 데이터 관계를 외래키(Foreign key)를 장의히고 이를 이용해서 SQL문의 join 등을 이용하여 관계형 연산을 하지만, NOSQL은 데이터간의 관계를 정의하지않는 특성을 가집니다.
- RDBMS의 복잡도와 용량 한계를 극복하기 위한 목적으로 등장한 만큼, 대용량의 데이터를 저장할 수 있도록 설계되었습니다
- 기존의 RDBMS처럼 하나의 고성능 머신에 데이터를 저장하는것이 아니라, 일반적은 서버를 수십대를 연결해서 데이터를 분산 저장 및 처리하는 구조를 가지며. 이러한 분산형 구조를 통해 데이터를 여러대의 서버에 분산해 저장하고, 분산 시에 데이터를 상호 복제해 특정서버에 장애가 발생했을때에도 데이터 유실이나 서비스 중지가 없는 형태를 가집니다.
- RDBMS와는 다르게 테이블의 스키마가 유동적이어서 비정형 데이터에 적합합니다.
- ID로 사용하는 키 부분에만 타입이 동일하고, mandatory(생략되지 않는) 필드로 지정하면 값에 해당하는 컬럼은 어떤 타입이든, 어떤 이름이 오든 허용되며 (ID 필드는 공통이지만, 데이터를 저장하는 컬럼은 각기 다른 이름 다른 데이터 타입을 가질 수 있습니다.)
- 분산 시스템의 특징을 그대로 반영하며 대부분 CAP이론을 따름.
- CAP 이론 ?
    - 분산 컴퓨팅 환경은 3가지 특징을 가지고있으며 이중 2가지만 만족 할 수 있다는 이론.
    - 특징 ?
        1. 일관성(Consistency)
        1. 가용성(Availability)
        1. 부분결함 용인(Partitioning)
- 기존에 RDBMS는 일관성(Consistency)와 가용성(Availability)에 초점을 맞추고 있으며 2가지에 초점을 맞춤으로서 부분결함을 용인하지않으며, 반면에 NOSQL은 일관성 및 가용성 부분결함 용인을 같이 사용하면서 불가피하게 Data가 유실될 가능성을 가지고있지만 부분결함을 용인하기때문에 대용량의 데이터 및 비선형적인 구조의 데이터를 처리할 수 있는 장점을 가지게 됩니다.


---


## NOSQL 종류

### Key/Value Store
- 대부분의 NOSQL은 Key/Value 개념을 지원
- Unique Key에 하나의 Value를 가지고 있는 형태
- put(key, value), value := get(key) 형태 API 사용

### Ordered Key/Value Store
- 데이터가 내부적으로 Key를 순서로 Sorting되어 저장됨
- Key 안에 (column:value) 조합으로 된 여러개의 필드를 가지는 구조
- 대표적인 DataBase: Hbase, Cassandra

### Document Key/Value Store
- Key/Value Store의 확장된 형태이며
- 저장되는 Value의 데이터 타입으로 Document라는 구조화된 데이터타입(JSON, XML, YAML)등을 사용합니다.
- 복잡한 계층구조 표현이 가능하며
- DataBase에 따라서 추가기능(Sorting, Join, Grouping)을 지원합니다.


- **JSON 예제**
```JSON
{
    "USER": {
        "name": "김태웅",
        "age": "24",
        "address": {
            "state": "서울",
            "nationnality": "대한민국"
        }
    }
}
```

### NOSQL DataBase ?


- Key-Value Stores: Oracle Coherence, Redis, Kyoto Cabinet
- BigTable-style DataBases: Apache HBase, Apacha Cassandra
- Document Databases: MongoDB, CouchDB
- Full Text Search Engines: Apache Lucene, Apache Solr
- Graph Databases: neo4j, FlockDB


### NOSQL 장점 및 단점
**Relational Modeling (관계형 모델링)**
- 전형적으로 가용한 데이터 구조에 기반
- 데이터 모델 정의 후, 어플리케이션에 맞는 쿼리 개발
- RDBMS 모델링 기법?
    1. 저장하고자 하는 도메인 모델 분석
    1. 개체 간의 관계(relationship) 식별
    1. 테이블 추출
    1. 테이블을 이용한 쿼리 구현

 **NOSQL data Modeling**
 - 어플리케이션 특징적인 데이터 접근 패턴에 따라 모델링
 - 어플리케이션의 필요한 쿼리와 성능을 정의한 이후, 요구 사항에 부합하도 데이터 모델을 구성
 - **NOSQL 모델링 기법**
    1. 도메인 모델 분석
    1. 쿼리 결과 도출
    1. 테이블(데이터 저장 모델) 설계

### NOSQL 모델링 특징
- 관계형 데이터베이스 모델링 보다 더 깊은 데이터 구조 및 접근 알고리즘에 대한 이해가 필요함
- NOSQL 쿼리가 실제 몇개의 물리 노드에 걸쳐서 수행되는지에 대한 이해가 있어야 제대로된 쿼리 디자인이 가능함
- NOSQL 디자인은 DB와 어플리케이션 뿐만 아니라 인프라(네트워크, 디스크)에 대한 디자인을 함께 해야 함
- 대부분의 NOSQL DB는 인증이나 인가 체계가 없어서 보안에 매우 취하기 때문에 별도의 보안 체계를 마련해야함 (방화벽, Reverse Proxy 등등)



### RDBMS 장점/딘점


**장점**
- 범용적이며 높은 성능
- 대부분의 경우에 관계형 데이터 베이스를 사용하는 것이 안정적
- 데이터의 일관성을 보증할수있다 (트랜잭션)
- 한번에 이뤄져야 하는 작업의 경우 데이터 불일치 상황을 방지
- 정규화를 전제로 하고 있기때문에 업데이트시 비용이 적다(동일 컬럼은 동일 장소에 존재)
- 데이터베이스 설계시 이미 불필요한 중복이 삭제됨
- 복잡한 형태의 쿼리도 가능(Join 등)
- 이미 성숙한 기술
**단점**
- 대량의 데이터 입력처리 입력하고 신속하게 처리하는데에 성능이 떨어짐
- 테이블 인덱스 생성이나 스키마 변경시 많은 오버헤드가 발생하는 작업의 경우 큰 리스크를 가짐
- 개발 및 운영시 컬럼을 확정짓기 어려운 경우 변경으로 인한 리스크가 존재한다.

### NOSQL 사용 목적
- NOSQL은 특정용도로 특화되어있음 (대용량 데이터 분산처리 및 비정형 데이터 처리 등)
- 데이터 분산에 용이하고 Join연산은 대부분 지원하지않음
- 데이터 모델 자체가 독립적으로 설계되어있어 데이터를 여러 서버에 분산시키는것이 용이
- 데이터에 대한 캐시가 필요한 경우
- 배열 형식의 데이터를 고속으로 처리할 필요가 있는 경우 및 모든 데이터를 저장하고 싶은 경우
**사용 시 주의 사항**
- 각 솔루션의 특징을 이해할 필요가 있음
- 아직 새로운 기술로 운영 노하우가 적음
- 버그가 상대적으로 많이 있는 상태
- 업체마다 고유의 특색을 살린 NOSQL을 개발해 공개하는 경우가 많아 새운 솔루션이 계속 출시되는 상태



--- 


### 위 내용은 T아카데미에서 제공되는 MongoDB 강의를 참고하여서 작성되었습니다.
 